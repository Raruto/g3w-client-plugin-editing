<div style="margin-bottom: 5px;">
  <div class="box-header with-border" style="margin-button:3px; background-color: #ffffff; ">
    <div class="container" style="width:100%">
      <div class="row">
        <div class="col-sm-4" id="search-box" >
          <input v-if="relationsLength" type="text" class="form-control" id="filterRelation" :placeholder="placeholdersearch">
        </div>
        <div class="col-sm-2 pull-right" style="padding:0">
          <span class="g3w-icon add-link pull-right" align="center"
                data-toggle="tooltip" data-placement="bottom"
                :title="tooltips.link_relation" @click="enableAddLinkButtons ? linkRelation() : null"
                :class="[{'disabled': !enableAddLinkButtons}, g3wtemplate.font['link']]">
          </span>
          <span data-toggle="tooltip" data-placement="bottom"
                 :title="tooltips.add_relation"
                 @click="enableAddLinkButtons ? addRelationAndLink() : null"
                 class="g3w-icon add-link pull-right"
                 :class="[{'disabled' : !enableAddLinkButtons}, g3wtemplate.font['plus']]">
          </span>
        </div>
      </div>
    </div>
  </div>
  <div class="box-body" style="padding:0;">
    <template v-if="relationsLength">
      <table class="table g3wform-relation-table table-striped" style="width:100%">
        <thead>
          <tr>
            <th v-for="attribute in relationAttributesSubset(relations[0])">
              {{attribute.label}}
            </th>
            <th></th>
            <th v-t="'tools'"></th>
          </tr>
          </thead>
          <tbody>
            <tr v-for="(relation, index) in relations" class="featurebox-header">
              <td v-show="!showAllFieds(index)" v-for="attribute in relationAttributesSubset(relation)">
                <template v-if="isMedia(attribute.value) && getValue(attribute.value)">
                  <div class="preview">
                    <a :href="getValue(attribute.value)" target="_blank">
                      <div class="previewtype" :class="getMediaType(attribute.value.mime_type).type">
                        <i class="fa-2x" :class="g3wtemplate.font[getMediaType(attribute.value.mime_type).type]"></i>
                      </div>
                    </a>
                    <div class="filename">{{ getFileName(attribute.value) }}</div>
                  </div>
                </template>
                <span v-else>{{ getValue(attribute.value) }}</span>
              </td>
              <td class="action-cell">
                <div
                  v-if="!fieldrequired"
                  class="g3w-mini-relation-icon skin-tooltip-left g3w-icon" :class="g3wtemplate.font['unlink']"
                  @click="unlinkRelation(index)"
                  data-toggle="tooltip" data-placement="left" :title="tooltips.unlink_relation"
                  aria-hidden="true">
                </div>
              </td>
              <td>
                <div style="display: flex">
                  <div class="skin-tooltip-left editbtn enabled" @click="startTool(relationtool, index)"
                       v-for="relationtool in getRelationTools()" :key="relationtool.state.name"
                       data-toggle="tooltip"
                       data-placement="left" :title="relationtool.state.name">
                    <img height="20px" width="20px" :src="resourcesurl + 'images/'+ relationtool.state.icon"/>
                  </div>
                </div>
              </td>
            </tr>
          </tbody>
        </table>
      </template>
    </div>
</div>
