<div>
  <div class="box-header with-border" style="margin:5px 0px 5px 0px; background-color: #ffffff; ">
    <div class="col-md-8">
      <h4>{{ relation.name }}</h4>
    </div>
    <div class="col-md-4" v-disabled="true">
      <i style="padding:5px; border:2px solid #3c8dbc; border-radius:20px; color:#3c8dbc; font-size: 20px; background-color: #ffffff" class="fa fa-plus pull-right" @click="addRelationAndLink" aria-hidden="true"></i>
      <i style="padding:5px; border:2px solid #3c8dbc; border-radius:25px; color:#3c8dbc; font-size: 20px; background-color: #ffffff" class="fa fa-link pull-right" @click="linkRelation" aria-hidden="true"></i>
    </div>
  </div>
  <div class="box-body">
    <template v-if="relationsLength">
      <table class="table table-striped">
        <thead>
          <tr>
            <th v-for="attribute in relationAttributesSubset(relations[0])">
              {{attribute.label}}
            </th>
            <th></th>
            <th></th>
          </tr>
          </thead>
          <tbody>
            <tr v-for="(relation, index) in relations" class="featurebox-header">
              <td v-for="attribute in relationAttributesSubset(relation)">
                <span>{{attribute.value}}</span>
              </td>
              <td>
                <i v-if="!fieldrequired" style="color:#3c8dbc; cursor:pointer; font-size:10px; padding:5px; border:2px solid #3c8dbc; border-radius:15px;" class="fa fa-chain-broken pull-right" @click="unlinkRelation(index)" aria-hidden="true"></i>
              </td>
              <td>
                <div class="dropup">
                  <i style="color:#3c8dbc;
                      cursor:pointer; font-size:10px;
                      padding:5px; border:2px solid #3c8dbc;
                        border-radius:15px;"
                     data-toggle="dropdown"
                     aria-haspopup="true" aria-expanded="false"
                     class="dropdown-toggle fa fa-cogs pull-right"
                     aria-hidden="true"></i>
                  <div class="dropdown-menu pull-right" style="margin-bottom:5px; box-shadow: 3px 3px 3px rgba(0, 0, 0, 0.5) !important;" :style="{'min-width': getRelationTools().length*40 + 'px !important' }">
                    <div v-for="relationtool in getRelationTools()" class="editbtn enabled" style="display:inline-block">
                      <img height="20px" width="20px"
                           @click="startTool(relationtool, index)"
                           :alt="relationtool.state.name"
                           :title="relationtool.state.name"
                           :src="resourcesurl + 'images/'+ relationtool.state.icon"/>
                    </div>
                  </div>
                </div>
              </td>
            </tr>
          </tbody>
        </table>
      </template>
    </div>
</div>
