<div class="toolbox">
  <div :class="{'disableddiv' : !isLayerReady }" :id="'id_toolbox_'+ state.id">
    <div @click="select" class="panel panel-primary" :class="{ 'toolboxselected': state.selected }">
      <div class="panel-heading container" style="width:100%;" :style="{ background: state.color}" >
        <div v-if="father" style="margin-right:5px;" class="pull-left enabled dropdown">
          <img  height="20px" width="20px" class="dropbtn" data-toggle="dropdown" :src="resourcesurl + 'images/relation.png'"/>
          <div class="dropdown-content" style="padding: 5px;">
            <div v-for="dependency in state.editing.dependencies" style="color: black" >{{ dependency }}</div>
          </div>
        </div>
        <div class="panel-title" :class="[father ? 'col-md-6' : 'col-md-8']">
          {{ state.title }}
        </div>
        <div @click="toggleEditing" class="editbtn pull-right" :class="{'enabled' : isLayerReady,  'g3w-icon-toggled' : state.editing.on}" >
          <span style="font-size: 15px;" class="g3w-icon g3w-edit"></span>
        </div>
      </div>
      <div class="panel-body">
        <tool
          :state="toolstate"
          :resourcesurl="resourcesurl"
          @stopactivetool="stopActiveTool"
          @setactivetool="setActiveTool"
          v-for="toolstate in state.tools">
        </tool>
        <div class="message" style="margin-top: 5px;" :id="'id_toolbox_messages_'+ state.id">
          <div v-html="state.message"></div>
          <div v-html="state.toolmessage"></div>
          <div v-show="state.loading" >Caricamento dati  <img :src="resourcesurl + '/images/loader.svg'"></div>
        </div>
      </div>
    </div>
  </div>
</div>